library(text2vec)
library(stringr)
# ----------------------------------------------------------------------------------------抓網址
data <- c()
data1 <- c()
links <- character()
front <- "https://www.ptt.cc/bbs/Gossiping/search?page="
for (i in 1:36) { #------------------------------------------------------------------------改頁數
page <- paste0(front, i)
pages[i] <- paste0(page, "&q=%E9%A2%B1%E9%A2%A8")
print(pages)
}
load("C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/722-05.RData")
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
library(rvest)
library(tm)
library(jiebaR)
library(jiebaRD)
library(Matrix)
library(wordcloud2)
library(text2vec)
library(stringr)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
load("C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/722-07.RData")
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
library(rvest)
library(tm)
library(jiebaR)
library(jiebaRD)
library(Matrix)
library(wordcloud2)
library(text2vec)
library(stringr)
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
cutter <- worker(stop_word = "C:/Users/jeff6/Desktop/Github/alan/颱風專題/722/a.txt")
new_user_word(cutter, c("西半部","東半部","中南部","南部","北部","東部","西部","東北部","基隆",
"台北","新北","桃園","新竹","苗栗","台中","澎湖","金門","連江","馬祖",
"彰化","南投","雲林","嘉義","台南","高雄","屏東","台東","花蓮","宜蘭",
"外圍環流",
"丹娜絲","山竹","瑪莉亞","泰利","谷超","天鴿","珊瑚","馬莎",
"海棠","尼莎","艾利","梅姬","馬勒卡","莫蘭蒂","尼伯特","杜鵑","天鵝",
"蘇迪勒","蓮花","昌鴻","紅霞","鳳凰","麥德姆","哈吉貝","菲特","天兔",
"康芮","潭美","西馬隆","蘇力","杰拉華","天秤","啟德","海葵","蘇拉",
"杜蘇芮","南瑪都","梅花","米雷","桑達","凡那比","南修","萊羅克",
"芭瑪","莫拉克","莫拉菲","薔蜜","哈格比","辛樂克","如麗","鳳凰",
"卡玫基","米塔","柯羅莎","韋帕","聖帕","梧提","帕布","珊珊","寶發",
"桑美","凱米","碧利斯","艾維尼","珍珠","龍王","丹瑞","卡努"))
cloud <- cutter[d.corpus]
#---------------------------------------------------------------------------------------------看關聯性
tokens=list(cloud)
class(tokens)
# 建構詞彙
it = itoken(tokens, progressbar = FALSE)
vocab = create_vocabulary(it)
vocab = prune_vocabulary(vocab, term_count_min = 5L)#刪除出現小於5次的詞
tail(vocab,20)#查看最高频的詞
vectorizer = vocab_vectorizer(vocab)
tcm = create_tcm(it, vectorizer,skip_grams_window = 5L)# 考慮詞的前後5個詞
glove = GlobalVectors$new(word_vectors_size = 40, vocabulary = vocab, x_max = 10)
wv_main = glove$fit_transform(tcm, n_iter = 10, convergence_tol = 0.01)
dim(wv_main)
wv_context = glove$components
dim(wv_context)
wv_main[1,1]
t(wv_context)[1,1]
word_vectors = wv_main + t(wv_context)
#建造“影響+地區”向量
relation = word_vectors["地區", , drop = FALSE] +
word_vectors["影響", , drop = FALSE]
#看和 “影響+地區” 相關的10個詞
cos_sim = sim2(x = word_vectors, y = relation, method = "cosine", norm = "l2")
head(sort(cos_sim[,1], decreasing = TRUE), 10)
# ----------------------------------------------------------------------------------------文字雲
z <- sort(table(cloud),decreasing = T)[1:50]
wordcloud2(z,
size = 0.5,
color = "random-light",
backgroundColor = "black",
shape = "triangle")
